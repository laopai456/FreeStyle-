# FS服装搭配专家v1.0 开发文档

## 项目概述

FS服装搭配专家是一个基于WPF的桌面应用程序，用于帮助用户管理和预览服装搭配。该项目采用现代UI设计，具有磨砂玻璃效果和可自定义皮肤功能。

## 技术栈

- **开发框架**：WPF (.NET 10.0-windows)
- **开发语言**：C#
- **UI设计**：XAML
- **构建工具**：.NET CLI

## 项目结构

```
FS服装搭配专家v1.0/
├── App.xaml                 # 应用程序入口
├── App.xaml.cs              # 应用程序逻辑
├── MainWindow.xaml          # 主窗口界面
├── MainWindow.xaml.cs       # 主窗口逻辑
├── SkinManager.cs           # 皮肤管理系统
├── conmon.cs                # 通用工具类
├── ItemshopM.cs             # 服装数据模型
├── RoleM.cs                 # 角色数据模型
├── VoiceM.cs                # 声音数据模型
├── OperationDebugger.cs     # 操作调试器
├── FS服装搭配专家v1.0.csproj  # 项目文件
└── 开发文档.md              # 本开发文档
```

## 核心功能

### 1. 窗口管理

- **窗口拖动**：点击标题栏可拖动窗口
- **最小化**：点击最小化按钮可将窗口最小化到任务栏
- **最大化**：点击最大化按钮可切换窗口大小
- **关闭**：点击关闭按钮可关闭应用程序

### 2. 视觉效果

- **玻璃拟态效果**：采用现代玻璃拟态（Glassmorphism）设计，具有半透明、模糊背景和柔和阴影
- **柔和渐变背景**：使用蓝粉紫渐变背景，提升视觉层次感
- **自定义皮肤**：支持切换不同的皮肤主题

### 3. 数据管理

- **服装数据**：管理服装物品信息
- **角色数据**：管理角色信息
- **声音数据**：管理声音效果

### 4. 预览功能

- **服装预览**：在右侧预览区域显示选中的服装效果

## 技术实现

### 窗口拖动功能

窗口拖动功能通过以下代码实现，支持从最大化状态恢复并正确定位：

```csharp
private void TitleBar_MouseLeftButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    // 开始拖动窗口
    if (this.WindowState == WindowState.Maximized)
    {
        // 如果窗口是最大化状态，先恢复到正常状态
        this.WindowState = WindowState.Normal;
        
        // 计算鼠标位置，使窗口在拖动时位置合理
        var point = e.GetPosition(this);
        this.Left = point.X;
        this.Top = point.Y;
    }
    
    this.DragMove();
}
```

### 玻璃拟态效果

玻璃拟态效果通过以下XAML代码实现：

```xaml
<Style x:Key="MainContainer" TargetType="Border">
    <Setter Property="Background" Value="#20FFFFFF" />
    <Setter Property="CornerRadius" Value="16" />
    <Setter Property="Margin" Value="16" />
    <Setter Property="Padding" Value="20" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="BorderBrush" Value="#4DFFFFFF" />
    <Setter Property="Effect">
        <Setter.Value>
            <DropShadowEffect BlurRadius="32" 
                              ShadowDepth="8" 
                              Opacity="0.1" 
                              Direction="270" 
                              Color="#000000" />
        </Setter.Value>
    </Setter>
</Style>
```

### 皮肤管理系统

皮肤管理系统通过`SkinManager`类实现，支持默认皮肤和自定义皮肤。

## 开发流程

### 1. 环境搭建

1. 安装.NET SDK 10.0或更高版本
2. 安装Visual Studio 2022或更高版本（推荐）
3. 克隆项目到本地

### 2. 构建项目

在项目目录中运行以下命令：

```bash
dotnet build
```

### 3. 运行项目

在项目目录中运行以下命令：

```bash
dotnet run
```

## 扩展指南

### 添加新皮肤

1. 在`SkinManager.cs`文件中，在`Skins`列表中添加新的`SkinData`对象
2. 设置皮肤的名称、主色调、次要色调等属性

### 添加新功能

1. 在`MainWindow.xaml`中添加新的UI元素
2. 在`MainWindow.xaml.cs`中添加对应的事件处理和业务逻辑
3. 根据需要创建新的数据模型和工具类

## 注意事项

1. 项目使用了WPF的`AllowsTransparency`和`WindowStyle="None"`属性，因此需要手动实现窗口管理功能
2. 磨砂玻璃效果在不同版本的Windows上可能有不同的表现
3. 项目目前处于开发初期，部分功能可能尚未实现

## 版本历史

- **v1.0**：初始版本，实现了基本的窗口管理和视觉效果
- **v1.0.1**：UI设计优化，从新拟态（Neumorphism）切换到玻璃拟态（Glassmorphism）设计，包括：
  - 采用半透明、模糊背景和柔和阴影的玻璃拟态效果
  - 优化背景渐变为更柔和的蓝粉紫过渡
  - 统一所有卡片和按钮的圆角为16px
  - 增强窗口管理功能，支持从最大化状态恢复并正确定位
  - 优化文字层级和视觉层次
- **v1.0.2**：标题和界面优化，包括：
  - 将应用程序标题从"FS服装搭配专家v1.0"改为"FreeStyle"
  - 使用白色加粗字体显示标题，提升视觉效果
  - 系统标题栏保持默认白色样式（由操作系统控制）
  - 确保标题栏与应用程序内容区域的视觉效果协调一致
- **v1.1**：界面和功能优化，包括：
  - 修复窗口黑边问题，通过设置WindowStyle="None"、AllowsTransparency="True"和Background="Transparent"
  - 增强霓虹渐变文字效果，使按钮文字在悬停时显示鲜艳的霓虹渐变色
  - 调整窗口大小，从900x1000改为1280x720，符合16:9的长宽比
  - 实现长按窗口任意位置都能拖动窗口的功能，通过在根Grid中添加一个透明的Grid作为拖动区域
  - 修复标题栏按钮文字不显示的问题，确保"最小化"、"最大化"、"关闭"等文字能够正常显示
  - 移除标题栏的边框，使界面更加简洁
  - 优化整体布局，确保所有元素都有适当的间距和视觉层次
- **v1.1.1**：标签样式优化，包括：
  - 修复标签圆角被截断的问题，通过增加标签宽度和内边距
  - 调整标签之间的间距，从15px减小到4px，使布局更加紧凑
  - 控制标签容器宽度，设置最小宽度为80px
  - 将标签整体向右移动10个像素，调整标签在容器中的位置
  - 优化标签文字对齐方式，从居中对齐改为左对齐
- **v1.1.2**：NBA球队logo选择功能开发尝试与回退，包括：
  - 尝试实现NBA球队logo选择功能，允许用户在启动程序前选择自己的主队
  - 创建了TeamSelectionWindow窗口，用于展示和选择NBA球队logo
  - 实现了从本地文件系统加载球队logo的功能
  - 开发了基于用户选择设置程序图标的功能
  - 由于功能实现过程中出现问题，且用户希望优先保证主界面正常显示，最终决定回退此功能
  - 简化了App.xaml.cs的启动逻辑，直接显示主窗口而不经过球队选择步骤
  - 保留了TeamSelectionWindow相关文件，以便未来可能重新开发此功能
- **v1.1.3**：标签系统优化与布局调整，包括：
  - 修复标签容器圆角显示问题，确保左右对称
  - 将标签移回内容容器（容器2）内部
  - 将TabPanel替换为StackPanel，确保标签横向排列
  - 优化标签样式，未选中状态下无边框，只有在选中或悬停时才显示边框
  - 恢复无标题栏样式，使用WindowStyle="None"、AllowsTransparency="True"和Background="Transparent"
  - 重新添加地图切换和常用工具标签页

## 开发团队

- 开发者：[您的名字]
- 联系方式：[您的邮箱]

## 许可证

[选择适合您项目的许可证]
