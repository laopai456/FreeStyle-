# FS服装搭配专家v1.0 项目概述

## 项目简介

FS服装搭配专家是一个基于WPF的桌面应用程序，用于帮助用户管理和预览服装搭配。该项目采用现代UI设计，具有磨砂玻璃效果和可自定义皮肤功能，为用户提供直观、美观的服装管理体验。

## 技术栈

- **开发框架**：WPF (.NET 10.0-windows)
- **开发语言**：C#
- **UI设计**：XAML
- **构建工具**：.NET CLI
- **版本控制**：Git

## 目录结构

```
FS服装搭配专家v1.0/
├── UI/                 # UI框架相关代码
│   ├── Windows/        # 窗口定义
│   │   ├── MainWindow.xaml        # 主窗口界面
│   │   ├── MainWindow.xaml.cs     # 主窗口逻辑
│   │   ├── TeamSelectionWindow.xaml     # 球队选择窗口
│   │   └── TeamSelectionWindow.xaml.cs  # 球队选择窗口逻辑
│   ├── App.xaml        # 应用程序入口
│   └── App.xaml.cs     # 应用程序逻辑
├── Core/               # 核心功能代码
│   ├── Models/         # 数据模型
│   │   ├── ItemshopM.cs    # 服装数据模型
│   │   ├── RoleM.cs        # 角色数据模型
│   │   └── VoiceM.cs       # 声音数据模型
│   ├── Services/       # 业务逻辑服务
│   │   └── SkinManager.cs  # 皮肤管理系统
│   └── Utilities/      # 通用工具类
│       ├── conmon.cs        # 通用工具类
│       └── OperationDebugger.cs  # 操作调试器
├── icon/               # 应用程序图标
│   └── favicon.ico     # 默认应用程序图标
├── bin/                # 构建输出目录
├── obj/                # 构建临时文件
├── .gitignore          # Git忽略文件
├── FS服装搭配专家v1.0.csproj  # 项目文件
└── 文档/               # 项目文档
    ├── 项目概述.md         # 本文件
    ├── 开发文档.md         # 详细的开发指南
    ├── 更新文档.md         # 版本更新记录
    ├── Git初始化指南.md    # Git使用指南
    ├── UI_元素编号与命名.md # UI元素的命名规范
    └── UI_示意图描述.md    # UI界面的详细描述
```

## 核心功能

### 1. 窗口管理
- **窗口拖动**：点击标题栏可拖动窗口
- **最小化**：点击最小化按钮可将窗口最小化到任务栏
- **最大化**：点击最大化按钮可切换窗口大小
- **关闭**：点击关闭按钮可关闭应用程序

### 2. 视觉效果
- **玻璃拟态效果**：采用现代玻璃拟态（Glassmorphism）设计，具有半透明、模糊背景和柔和阴影
- **柔和渐变背景**：使用蓝粉紫渐变背景，提升视觉层次感
- **自定义皮肤**：支持切换不同的皮肤主题

### 3. 核心功能（Core）
- **数据模型**：
  - `ItemshopM.cs`：服装数据模型，管理服装物品信息
  - `RoleM.cs`：角色数据模型，管理角色信息
  - `VoiceM.cs`：声音数据模型，管理声音效果
- **业务逻辑服务**：
  - `SkinManager.cs`：皮肤管理系统，处理皮肤切换和应用
- **通用工具类**：
  - `conmon.cs`：通用工具类，提供各种辅助方法
  - `OperationDebugger.cs`：操作调试器，用于调试和日志记录

### 4. UI功能
- **搜索功能**：允许用户输入服装名称或代码进行搜索
- **加载图片功能**：加载服装图标图片
- **变更功能**：单个装备变更
- **批量变更功能**：批量装备变更
- **预览功能**：在右侧预览区域显示选中的服装效果和名称

### 5. 图标管理
- **自定义图标**：支持通过替换 `icon/favicon.ico` 文件快速更改应用程序图标
- **任务栏图标**：应用程序在任务栏显示自定义图标
- **换肤图标**：在标题栏添加了具有流动渐变色效果的换肤图标，点击可直接切换皮肤颜色

### 6. 皮肤系统
- **直接换肤**：点击标题栏的换肤图标可直接切换应用程序皮肤颜色
- **流动渐变效果**：换肤图标具有流动的蓝粉紫渐变效果，更加醒目
- **多皮肤支持**：内置多种皮肤颜色，包括蓝色、粉色、浅蓝色和浅红色

### 7. 功能迁移
- **从FS服装搭配专家v5.3.6迁移**：已从 `D:\py\反编译\FS服装搭配专家v5.3.6` 迁移核心功能到当前项目
- **UI布局优化**：解决左侧文字重叠问题，调整预览效果位置，确保道具名称在框体上面

## 功能迁移计划

### 源程序路径
**源程序：** `D:\py\反编译\FS服装搭配专家v5.3.6`

### 已迁移功能

| 功能名称 | 状态 | 描述 | 实现文件 | 类型 |
|---------|------|------|----------|------|
| 搜索功能 | ✅ 已迁移 | 允许用户输入服装名称或代码进行搜索 | `UI/Windows/MainWindow.xaml`、`UI/Windows/MainWindow.xaml.cs` | UI |
| 加载图片功能 | ✅ 已迁移 | 加载服装图标图片 | `UI/Windows/MainWindow.xaml`、`UI/Windows/MainWindow.xaml.cs` | UI |
| 变更功能 | ✅ 已迁移 | 单个装备变更 | `UI/Windows/MainWindow.xaml`、`UI/Windows/MainWindow.xaml.cs` | UI |
| 批量变更功能 | ✅ 已迁移 | 批量装备变更 | `UI/Windows/MainWindow.xaml`、`UI/Windows/MainWindow.xaml.cs` | UI |
| 预览功能 | ✅ 已迁移 | 预览服装图片和名称 | `UI/Windows/MainWindow.xaml`、`UI/Windows/MainWindow.xaml.cs` | UI |
| 服装数据模型 | ✅ 已迁移 | 管理服装物品信息 | `Core/Models/ItemshopM.cs` | Core |
| 角色数据模型 | ✅ 已迁移 | 管理角色信息 | `Core/Models/RoleM.cs` | Core |
| 声音数据模型 | ✅ 已迁移 | 管理声音效果 | `Core/Models/VoiceM.cs` | Core |
| 通用工具类 | ✅ 已迁移 | 提供各种辅助方法 | `Core/Utilities/conmon.cs` | Core |

### 待迁移功能

| 功能名称 | 状态 | 描述 | 预计实现文件 | 类型 |
|---------|------|------|--------------|------|
| 地图切换功能 | ⏳ 待迁移 | 切换游戏地图 | `UI/Windows/MainWindow.xaml`、`UI/Windows/MainWindow.xaml.cs` | UI |
| 常用工具功能 | ⏳ 待迁移 | 提供常用工具集合 | `UI/Windows/MainWindow.xaml`、`UI/Windows/MainWindow.xaml.cs` | UI |
| 批量操作优化 | ⏳ 待迁移 | 优化批量变更操作流程 | `UI/Windows/MainWindow.xaml.cs` | UI |
| 配置管理 | ⏳ 待迁移 | 管理应用程序配置 | `Core/Utilities/` | Core |

## 文档导航

| 文档名称 | 用途 | 详细内容 |
|---------|------|----------|
| 项目概述.md | 项目总入口，快速了解项目 | 本文档 |
| 开发文档.md | 详细的开发指南 | 包含技术实现、核心功能和扩展指南 |
| 更新文档.md | 版本更新记录 | 记录各版本的更新内容和使用方法 |
| Git初始化指南.md | Git使用指南 | 如何初始化和使用Git管理项目 |
| UI_元素编号与命名.md | UI元素的命名规范 | UI元素的编号规则和命名约定 |
| UI_示意图描述.md | UI界面的详细描述 | 界面元素的布局和功能说明 |

## 快速开始

### 环境要求
- .NET SDK 10.0或更高版本
- Visual Studio 2022或更高版本（推荐）

### 构建项目
在项目目录中运行以下命令：

```bash
dotnet build
```

### 运行项目
在项目目录中运行以下命令：

```bash
dotnet run
```

### 生成文件路径
构建完成后，可执行文件位于：

```
bin\Debug\net10.0-windows\FS服装搭配专家v1.0.exe
```

## 开发流程

### 1. 环境搭建
1. 安装.NET SDK 10.0或更高版本
2. 安装Visual Studio 2022或更高版本（推荐）
3. 克隆项目到本地

### 2. 代码结构
- **UI层**：负责界面展示和用户交互，不包含业务逻辑
- **Core层**：负责业务逻辑和数据处理，与UI无关

### 3. 开发规范
- **命名规范**：使用PascalCase命名类和方法，camelCase命名变量
- **代码风格**：保持代码风格一致，使用适当的缩进和注释
- **文档更新**：开发新功能时，及时更新相关文档

### 4. 提交规范
采用结构化的提交消息格式：

```
<类型>: <描述>

<详细说明>
```

类型建议：
- `ui`: UI框架相关更改
- `core`: 核心功能相关更改
- `config`: 配置文件更改
- `docs`: 文档更新
- `build`: 构建系统更改

### 5. 分支管理
- `master`: 主分支，保持稳定
- `develop`: 开发分支
- `feature/<功能名>`: 功能开发分支

## 技术亮点

1. **现代UI设计**：采用玻璃拟态效果，符合现代设计趋势
2. **模块化架构**：UI和核心功能分离，便于维护和扩展
3. **灵活的皮肤系统**：支持自定义皮肤主题
4. **易于定制的图标**：通过简单替换文件即可更改应用程序图标
5. **动态渐变图标**：实现了带有流动渐变效果的背心图标，使用OpacityMask技术确保渐变只在图标形状上显示
6. **清晰的文档结构**：完善的文档体系，便于团队协作和新开发者快速上手

## 高级UI技巧：动态渐变图标实现

### 技术原理
本项目实现了一个带有流动渐变效果的背心图标，使用了以下技术：

1. **LinearGradientBrush**：创建蓝粉紫三色渐变背景
2. **Storyboard和DoubleAnimation**：实现渐变流动动画效果
3. **OpacityMask**：使用ImageBrush作为遮罩，确保渐变只在背心形状上显示
4. **ImageBrush**：使用PNG图像的透明度信息作为遮罩

### 实现代码
```xaml
<Button Name="btnSkin" 
        Width="40" 
        Height="40" 
        Click="btnSkin_Click"
        Background="Transparent"
        BorderBrush="Transparent"
        BorderThickness="0"
        Cursor="Hand"
        Padding="0"
        Margin="0">
    <Grid Width="24" Height="24">
        <!-- 渐变背景 -->
        <Border Width="24" Height="24" CornerRadius="4">
            <Border.Background>
                <LinearGradientBrush x:Name="IconGradient" StartPoint="-1,-1" EndPoint="2,2">
                    <GradientStop Color="#FF667EEA" Offset="0" />
                    <GradientStop Color="#FF6DD5FA" Offset="0.5" />
                    <GradientStop Color="#FFC58AF9" Offset="1" />
                </LinearGradientBrush>
            </Border.Background>
            <!-- 使用ImageBrush作为遮罩，确保只在图片非透明区域显示渐变 -->
            <Border.OpacityMask>
                <ImageBrush ImageSource="template/vest-l.png" 
                           Stretch="Uniform" 
                           AlignmentX="Center" 
                           AlignmentY="Center" />
            </Border.OpacityMask>
            <Border.Triggers>
                <EventTrigger RoutedEvent="Border.Loaded">
                    <BeginStoryboard>
                        <Storyboard RepeatBehavior="Forever">
                            <PointAnimation 
                                Storyboard.TargetName="IconGradient" 
                                Storyboard.TargetProperty="StartPoint" 
                                From="-1,-1" To="1,1" 
                                Duration="0:0:3" />
                            <PointAnimation 
                                Storyboard.TargetName="IconGradient" 
                                Storyboard.TargetProperty="EndPoint" 
                                From="0,0" To="2,2" 
                                Duration="0:0:3" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </Border.Triggers>
        </Border>
    </Grid>
</Button>
```

### 关键技术点
1. **OpacityMask的使用**：通过ImageBrush的透明度信息，只在PNG图像非透明区域显示渐变效果
2. **动画效果**：使用PointAnimation动画修改渐变的StartPoint和EndPoint，实现流动效果
3. **性能优化**：移除了重叠的Image控件，减少了渲染开销
4. **居中对齐**：通过设置ImageBrush的AlignmentX和AlignmentY属性，确保遮罩图像在中心对齐

## 未来规划

- **功能扩展**：增加更多服装管理功能
- **性能优化**：提升应用程序的运行性能
- **跨平台支持**：考虑支持更多操作系统
- **用户体验改进**：持续优化界面和交互体验

## 联系方式

- 开发者：[您的名字]
- 联系方式：[您的邮箱]

---

**注**：本文档旨在帮助开发者快速了解项目，详细的技术实现和开发指南请参考 `开发文档.md`。